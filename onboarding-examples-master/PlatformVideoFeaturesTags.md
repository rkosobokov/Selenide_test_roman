# Фичи платформы
https://confluence.bftcom.com/pages/viewpage.action?pageId=183823542

| Видеоролик | Метка времени | Тема | Комментарии |
| :--- | :--- | :--- | :--- |
| Demo PS 2022-02-11.mp4 | 00:00 | Генератор сервиса из Конфигуратора | Работа идёт через конфигуратор или конфигуратор сгенерил и забыл? |
|  | 11:25 | Из агрегационного сервиса сходить в MDM и обогатить ссылку записью из НСИ |  |
|  | 20:50 | Поддержка получения данных на конкретную дату | Дискретность времени настраивается в менеджере транзакций |
|  | 25:15 | Очистка старых записей в сервисе контекста | Для разработчиков платформы, прикладным не должно понадобиться |
|  | 32:45 | Нумератор (сервис последовательностей) | Разработанный сервис уже есть в платформе, но о нём не знали |
|  | 44:45 | Окно целостности (отправка в топики) |  |
|  | 56:00 | Вызов GRPC сервисов через REST (в конце обсуждаются локальные и глобальные транзакции) | Вопросы о вложенности полей JSON и маппинге protobuf на json |
| Demo PS 2022-02-18.p1.mp4 | 00:00 | Сервис tasklist | Elastic не лучшее решение для хранения первичных данных |
|  | 22:55 | Конвертация логического в физическое время менеджера транзакций и наоборот |  |
| Demo PS 2022-02-18.p2.mp4 | 00:30 | constraint в txManager |  |
|  | 13:50 | Добавление аннотаций для взаимодействия с MDM при генерации POJO из AdsConfigurator | Прикладные разработчики справочники не создают, их создают аналитики НСИ |
| Demo PS 2022-02-25.p1.mp4 | 00:30 | Блокировки в Менеджере транзакций | Нужно угадывать предполагаемое время транзакции, обсуждается производительность блокировок чтения<div>Нужно архитектурное решение по функционалу обработки сбоев</div> |
|  | 28:30 | SharedLock | Обсуждение того, как прикладное приложение заполняет objectType при создании блокировки |
| Demo PS 2022-02-25.p2.mp4 | 00:00 | Продолжается обсуждение заполнения objectType при создании блокировки |  |
|  | 03:30 | Отправка событий в окно целостности | Обсуждается возможное пересечение по aggregateName и ведение реестра сервисов |
|  | 27:20 | Вопрос про генерацию проекта на уровне группы | Будет сделано к 28.02.2022 |
| Demo PS 2022-03-04.p1.mp4 | 00:00 | MetadataService |  |
|  | 21:50 | Конфигуратор доменных событий | Показывается содержимое топиков iw-raw, iw-system, iw-tx |
| Demo PS 2022-03-04.p2.mp4 | 01:00 | Генерация CRUD-сервиса из конфигуратора |  |
|  | 06:40 | Рефакторинг в конфигураторе (изменение идентификатора объекта) |  |
|  | 10:45 | Генерация проектов по группе |  |
|  | 13:50 | Поддержка union в проекциях |  |
|  | 18:45 | Добавление возможности делать unique constraints | Обсуждение можем ли мы отличить ошибку "дубль" (бизнес-ошибка) от технической ошибки. |
|  | 26:00 | Примеры использования DataMaps запросов на Java API | Прикладной разработчик делает nested loops руками, обсуждение невозможности прокидывания лимитов в БД |
| Demo PS 2022-03-04.p3.mp4 | 00:00 | Продолжение обсуждения прокидывания лимитов запросов в платформу |  |
| Demo PS 2022-03-11.mp4 | 03:30 | Трассировка запросов | Обсуждение возможности отображения параметров вызова сервисов в zipkin |
| Demo PS 2022-03-16.mp4 | 07:10 | Как обрабатываются ошибки в Zebee (retry) | Обсуждается различия между бизнес-ошибкой и технической ошибкой, интервал между повторами |
| Demo PS 2022-03-18.mp4 | 02:00 | Политика отката транзакций | Показывают как работает rollback |
|  | 12:45 | Ключ идемпотентности | Kafka/gRPC, перенос ключа между нодами |
|  | 28:45 | Сервис последовательностей | Удаление последовательностей приводит к дублям |
|  | 47:45 | Вызов блокировок в платформенную библиотеку | Почему блокировка происходит в setter, а не при flush? |
|  | 52:25 | Аннотации для прописывания связей в сущностях | Теперь можно отказаться от AbstractDbMetadataProvider |
|  | 54:40 | Компактификация | По событиям из rollback-топика удаляет неактуальные строки из БД |
| Demo PS 2022-03-25.mp4 | 01:30 | Функциональность деления и агрегации запросов | Замена Apollo Federation на GraphQL-mesh, теперь в процесс можно передать не только плоские объекты, а сложные объекты с вложенными полями/объектами, добавлены черновики |
|  | 17:00 | Type merging |  |
|  | 34:00 | Порядок вызова сервисов, если требуется обращения к разным сервисам |  |
|  | 45:40 | Функциональность идемпотентного приёма команд |  |
|  | 56:00 | Обращение к сервисам по сокращенному имени или по имени пакета |  |
| Demo PS 2022-04-01.mp4 | 02:45 | Вызов другого сервиса по gRPC-REST из агрегатного сервиса |  |
|  | 14:40 | Фильтрация агрегатов на уровне СУБД |  |
|  | 27:55 | Метод получения ключ элемента агрегата от родителя через вложенные коллекции до самого нижнего элемента | Пригодится для передачи изменений в окно целостности |
|  | 31:50 | Обсуждение производительности select max на тысяче версий |  |
|  | 33:35 | Функциональность маршрутизации подзапросов к API внутренних сервисов | Обсуждается уникальность имён методов в конфигурации GraphQL-mesh |
| Demo PS 2022-04-08.mp4 | 01:30 | Упрощение работы по добавлению источников в mesh |  |
|  | 28:55 | Развёрнутый экземпляр mesh в ЕЦП | Обсуждаются неудобства, что все связи между сущностями описываются в mesh в одном конфигурационном файле |
|  | 45:30 | Авторизация пользователя |  |
| Demo PS 2022-04-15.mp4 | 01:30 | Публикация новой ReadView схемы |  |
|  | 21:00 | Добавили два метода получения агрегатов при генерации сервиса агрегатов |  |
|  | 32:30 | Демонстрация разделения пользовательских задач по ролям |  |
|  | 43:45 | Сервис последовательностей |  |
| Demo PS 2022-04-22.mp4 | 01:10 | Реализация сервиса ReadView для получения данных из ElasticSearch | Демонстрируется свой язык-обёртка на ElasticSearch Query |
|  | 25:15 | Разработка API для ЕЦП |  |
|  | 39:45 |  | Плохое качество звука и видео |
|  | 49:25 | Шаблонизация расширения типов |  |
|  | 50:55 | Трассировка запросов в GraphQL-mesh |  |
| Demo PS 2022-04-29.mp4 | 0:00 | Обработка разного числа идентификаторов в батч-запросах и ответах в mesh |  |
|  | 06:45 | Трансляция ошибок из gRPC-сервисов в GraphQL |  |
|  | 30:00 | Передача в событиях полного имени entity и агрегата | Обсуждается в том числе порядок обработки событий в топиках окна целостности |
| Demo PS 2022-05-13.mp4 | 00:45 | Алгоритм агрегации патчей в разрезе сущностей индекса по схеме (ReadView) |  |
|  | 22:15 | Актуализация логики аутентификации под новые требования | Аутентификация по протоколу OpenID Connect |
|  | 39:50 | Адаптер для обращений в НСИ из GraphQL-mesh (метод getById) |  |
|  | 51:45 | Чистка агрегатов после отката транзакции в агрегатном сервисе |  |
| Demo PS 2022-05-20.mp4 | 01:00 | Архитектура сервиса авторизации |  |
|  | 02:25 | Проверка прав на Casbin | Демонстрация работы методов проверки прав доступа на основе файла политик |
|  | 19:40 | Пример БП на Java | Пример того, как можно заменить Zeebe бизнес-операций кодом на Java |
|  | 49:00 | Новое поле referenceToAttribute в ReadView схеме |  |
|  | 01:09:00 | Обновление проекта в Git из ADS Configurator | Конфигуратор — единая IDE для всего. Демонстрация работы регионов. Перегенерация затрагивает только файлы, в которых есть регионы. |
| Demo PS 2022-05-27.1.mp4 | 00:00 | Возможность поиска через OR в клиенте | Запросы к graphql-mesh с передачей запроса в синтаксисе ElasticSearch в параметре queryString |
|  | 13:50 | Отправка сообщений об изменении записи ReadView в Kafka |  |
|  | 15:45 | Адаптер для обращений в НСИ из GraphQL Mesh (метод getByCode) |  |
|  | 20:15 | Доработка трансляции ошибок gRPC-сервисов в GraphQL | Маппинг кусочка JSON из ответа gRPC-сервиса во вложенную структуру в ответе GraphQL Mesh |
|  | 26:55 | Интеграция authz-server в прикладные сервисы |  |
|  | 34:00 | Получение информации о текущем пользователе в GraphQL Mesh |  |
|  | 34:55 | Демонстрация подключения стартера сервиса авторизации |  |
| Demo PS 2022-05-27.mp4 | 0:00 | Продолжение демонстрации использования стартера авторизации и его аннотаций |  |
|  | 13:15 | Демонстрация Logout в SSO Avanpost |  |
| Demo PS 2022-06-03.1.mp4 | 0:25 | Обзор концептуальной схемы |  |
|  | 2:40 | Шардирование политик сервера авторизации по доменам |  |
|  | 5:00 | Новые правила по ABAC | RBAC — политика задаются по ресурсу, а в ABAC — можно задавать логические выражения |
|  | 29:15 | Деплой политик в сервис авторизации |  |
|  | 33:25 | Обсуждение заглушки для отключения всех проверок прав доступа для локальной разработки |  |
| Demo PS 2022-06-03.2.mp4 | 0:00 | Продолжение обсуждения заглушки для отключения всех проверок прав доступа для локальной разработки |  |
| Demo PS 2022-06-10.mp4 | 0:40 | Вложенные объекты в НСИ |  |
|  | 2:35 | Шардирование и деплой сервера авторизации | Демонстрация пайплайна для деплоя политик в сервис авторизации |
| Demo PS 2022-06-17.1.mp4.mp4 | 0:40 | Доступ к серверам по доменному имени |  |
|  | 3:30 | Девелоперский режим для локальной разработки | Включается через профиль Spring |
|  | 6:15 | Добавление источников в GraphQL Mesh с помощью proto-файлов | В том числе, обсуждаются подтягивание транзитивных зависимостей Maven и proto |
| Demo PS 2022-06-17.2.mp4.mp4 | 0:15 | Адаптер ReadView чтобы с ним можно было работать через GraphQL как на вход, так и на выход | Демонстрация использования criteriaSet и criteriaGroups для запросов к индексу ElasticSearch<br>В вопросах обсуждается сможет ли фронтенд воспользоваться функциями сортировки по нескольким колонкам, которые вынесены в API |
| Demo PS 2022-06-24.1.mp4 | 0:15 | Разработка нового tx | Показывается функционал менеджера транзакций и его дополнительных компонентов: transactionScheduler (который отменяет транзакции, время которых истекло), lock-manager (работает с блокировками) и lockScheduler (находит зависшие транзакции в lock-manager и отменяет их) |
|  | 7:00 | Конструктор ReadView (публикация схемы, генерация артефактов) | Демонстрация построения ReadView модели на основе справочника (объекта приложения) в AdsConfigurator<br>Обсуждаются способы связи разных агрегатов в одном ReadView |
|  | 28:50 | Реализация pipeline для проверок merge request в Gitlab для GraphQL Mesh | Суть в том, чтобы разрешить merge в master только если pipeline прошёл успешно<br>Демонстрация работы с Gitlab CI/CD, перезапуск pipeline |
| Demo PS 2022-06-24.2.mp4 | 1:00 | Продолжение демонстрации работы Gitlab CI/CD | Проверка успешности pipeline для merge работает не только для master ветки, но и для всех веток<br>Работает только для ecp-graphql-mesh |
|  | 5:50 | Фильтрация полей при доступе к ReadView | Демонстрация того, что с помощью прав доступа в сервисе авторизации можно отключить получение определённых полей в ReadView |
|  | 13:00 | Фильтрация по группам criteriaGroups |  |
| Demo PS 2022-07-01.1.mp4 | 0:40 | Обогащение данных в ReadView сведениями из разных агрегатов | Обсуждаются связи с другими агрегатами типов 1-1 и 1-Many, вложенные зависимости, максимальный уровень вложенности и пр.<br> |
|  | 28:25 | Доработка по замечаниям о возврате полей в ReadView, когда к ним нет доступа | Обсуждение уязвимостей при запросах по полям, к которым нет доступа |
| Demo PS 2022-07-01.2.mp4 | 0:00 | Продолжение обсуждения доступа к полям ReadView |  |
| Demo PS 2022-07-08.1.mp4 | 0:35 | Прототип Camunda во взаимодействии с событиями и вызовом бизнес-операций | В конце обсуждается транзакционная целостность и необходимость для этого объединять бизнес-операции в более крупные блоки в Camunda |
| Demo PS 2022-07-08.2.mp4 | 0:00 | Продолжение обсуждения транзакционной целостности |  |
|  | 2:50 | Инструментарий прикладного разработчика Camunda |  |
|  | 4:50 | Обсуждение передачи большого числа полей в Camunda |  |
|  | 10:00 | Демонстрация логирования процесса деплоя в пайплайнах сервиса ecp-graphql-mesh |  |
|  |  |   |  |



